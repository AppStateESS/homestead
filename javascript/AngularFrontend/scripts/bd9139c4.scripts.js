"use strict";angular.module("roomDamages",[]),angular.module("hmsAngularApp",["ngResource","roomDamages","ngRoute"]).config(["$routeProvider","$httpProvider",function(a,b){b.defaults.useXDomain=!0,b.defaults.withCredentials=!0,a.when("/",{templateUrl:"views/checkout.html",controller:"CheckoutCtrl"}).otherwise({redirectTo:"/"})}]);var myApp=angular.module("hmsAngularApp");myApp.controller("CheckoutCtrl",["$scope","roomDamageBroker","roomDamageResident","$http",function(a,b,c,d){b.getDamages().then(function(b){a.damages=b.data}),a.dmgTypes=b.getDamageTypes(),a.newDamages=[],a.residents=c.getResidents(),a.student=c.getStudent(),a.assignment=c.getAssignment(),a.addDamage=function(){var b=angular.copy(a.residents);a.newDamages.push({residents:b})},a.removeDamage=function(b){a.newDamages.splice(b,1)},a.submitHandler=function(){for(var b=0;b<a.newDamages.length;b++){var c=!1;for(j in a.newDamages[b].residents)a.newDamages[b].residents[j].selected&&(c=!0);if(!c)return alert("Please select at least one student who is responsible for each damage."),void 0}d.post("index.php",{keyCode:a.keyCode,keyNotReturned:a.keyNotReturned,newDamages:a.newDamages,improperCheckout:a.improperCheckout}).success(function(){console.log("posted")})}}]),angular.module("roomDamages").provider("roomDamageBroker",function(){function a(a){this.getDamages=function(){return a.get("http://localhost/hms/phpws/index.php?module=hms&action=GetRoomDamages&bannerId=900325006&hallId=553")},this.getDamageTypes=function(){return b}}var b=null;this.setDamageTypes=function(a){b=a},this.$get=["$http",function(b){return new a(b)}]}),angular.module("roomDamages").provider("roomDamageResident",function(){function a(){this.getResidents=function(){return b},this.getStudent=function(){return c},this.getAssignment=function(){return d}}var b=null,c=null,d=null;this.setResidents=function(a){b=a},this.setStudent=function(a){c=a},this.setAssignment=function(a){d=a},this.$get=function(){return new a}});