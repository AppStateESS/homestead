<div style="margin: auto; text-align: center">
        <h1>
          {{student.name}} <span style="color: #CCC">({{student.studentId}})</span>
        </h1>
        <h3>checking out of</h3>
        <h1>{{assignment.hallName}} {{assignment.roomNumber}}</h1>
      </div>

      <form class="phpws-form form-protected" id="checkout_form" name="checkout_form">
      
        <input type="hidden" name="module" id="module" value="hms">
        <input type="hidden" name="action" id="action" value="CheckoutFormSubmit">
        <input type="hidden" name="bannerId" id="bannerId" value="900325006">
        <input type="hidden" name="checkinId" id="checkinId" value="6145">

        <hr>
        
        <label for="checkin-form-keyCode">Key Code</label> <input type="text" name="keyCode" id="checkin-form-keyCode" ng-model="data.keyCode" title="Key Code" value="" autofocus="" placeholder="Enter key code..."> <br>
        <input type="checkbox" name="keyNotReturned" id="checkin-form-keyNotReturned" ng-model="data.keyNotReturned" value="keyNotReturned" title="keyNotReturned">&nbsp;<label for="checkin-form-keyNotReturned">Key not returned</label>
        <hr>

        <h3>Existing Room Damages</h3>
        <table class="table">
          <tr>
            <th>Reported On</th>
            <th>Side of Room</th>
            <th>Damage Type</th>
            <th>Details</th>
            <th></th>
          </tr>
          <tr ng-repeat="dmg in damages">
            <td>{{dmg.reported_on * 1000 | date: 'M/d/yyyy'}}</td>
            <td>{{dmg.side}}</td>
            <td>{{dmgTypes[dmg.damage_type].category}} - {{dmgTypes[dmg.damage_type].description}}
            </td><td>{{dmg.note}}</td>
          </tr>
        </table>

        <h3>New Room Damages</h3>
        <table class="table">
          <tr>
            <th>Responsible Resident</th>
            <th>Side of Room</th>
            <th>Damage Type</th>
            <th>Details</th>
            <th></th>
          </tr>
          <tr ng-repeat="(key, dmg) in newDamages">
            <td>
              <p ng-repeat="res in dmg.residents">
                <label>
                  <input type="checkbox" name="selectedResidents" value="{{res.studentId}}" ng-model="res.selected"> {{res.name}}
                </label><br>
              </p>
            </td>

            <td>
              <select class="form-control" ng-model="dmg.side" required="">
                <option value="">Side...</option>
                <option value="left">Left</option>
                <option value="right">Right</option>
                <option value="both">Both</option>
              </select>
            </td>

            <td>
              <select ng-model="dmg.type" ng-options="dmgId as d.description group by d.category for (dmgId, d) in dmgTypes" class="form-control" id="phpws-form-damage-type" name="damageCategory" required="">
                <option value="">Choose damage type...</option>
              </select>
            </td>
            <td>
              <input type="text" ng-model="dmg.details" class="form-control" name="detail" size="50" placeholder="Details about the damage..." required="">
            </td>
            <td>
              <button type="button" class="btn btn-danger" ng-click="removeDamage(key)">Remove</button>
            </td>
          </tr>
          <tr ng-show="!newDamages.length">
            <td colspan="5" class="text-muted">No new damages.</td>
          </tr>
        </table>

        <button type="button" class="btn btn-default" ng-click="addDamage()">Add Damage</button>
        <hr>
        
        <input type="checkbox" name="improper_checkout[improper_checkout]" ng-model="data.improperCheckout" id="improper-checkout" title="Improper Check-out" value="improper-checkout">
        <label class="checkbox-label" for="improper-checkout">Improper Check-out</label>
        <hr>

        <br> <button type="submit" class="btn btn-primary" ng-click="submitHandler();">Complete Checkout</button>
      </form>